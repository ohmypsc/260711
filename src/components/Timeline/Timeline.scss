.w-timeline {
  background: transparent;
  position: relative;
}

/* ✅ 사진 크기 + 안전 여백 변수 */
:root {
  /* ✅ 사진 한 변 더 살짝 축소 */
  --photo: clamp(145px, 16.5vw, 210px);

  /* 가운데 라인 컬럼 폭 */
  --line-col-w: 44px;

  /* 라인과 사진 사이 안전 여백 */
  --gutter: clamp(14px, 2vw, 26px);

  /* 70% 아래부터 다음 시작 → 30% 겹침 */
  --overlap: calc(var(--photo) * -0.3);

  /* 좌/우 교차 리듬 */
  --lift: calc(var(--photo) * 0.06);
}

/* 리스트 */
.timeline-list {
  list-style: none;
  padding: 0;
  margin: 0;
  position: relative;
  display: grid;
  gap: 0.6rem;
}

/* 가운데 세로 라인 */
.timeline-list::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  background: linear-gradient(
    to bottom,
    rgba(231, 163, 169, 0.45),
    rgba(231, 163, 169, 0.06)
  );
  z-index: 0;
}

/* 아이템 한 줄 (photo / line / caption) */
.timeline-item {
  position: relative;
  display: grid;
  grid-template-columns: 1fr var(--line-col-w) 1fr;
  align-items: start;
}

/* ✅ 사진만 감싸는 영역 */
.media {
  position: relative;
  z-index: 1;

  /* ✅ 실제 적용되는 사진 크기(가운데 침범 방지) */
  --photo-safe: min(
    var(--photo),
    calc(50vw - (var(--line-col-w) / 2) - var(--gutter))
  );

  width: var(--photo-safe);
  height: var(--photo-safe); /* ✅ 높이도 사진 정사각에 고정 */
  display: flex;
  flex-direction: column;
}

/* 사진 높이 = width와 동일 */
.photo-wrap {
  width: 100%;
  height: 100%;
  border-radius: 14px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 10px 20px var(--shadow-color);

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
}

/* ───────── 라인/점 ───────── */

/* ✅ 라인 컬럼이 “사진 높이만큼만” 가지게 해서 dot이 사진 중앙에 옴 */
.line-col {
  grid-column: 2;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center; /* ✅ 세로 중앙 */
  height: var(--photo-safe); /* ✅ 사진 높이 */
  z-index: 2;
}

.dot {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: var(--theme-primary);
  box-shadow: 0 0 0 4px rgba(231, 163, 169, 0.18);
  z-index: 3;
}

/* ───────── 캡션 ───────── */

/* ✅ 캡션은 반대편 칼럼 + dot(사진 중앙) 기준으로 맞춰짐 */
.caption-col {
  z-index: 1;
  display: flex;
  flex-direction: column;
  gap: 0.22rem;
  align-self: center; /* ✅ dot 높이 라인에 맞춰 가운데 정렬 */
  padding-top: 0;     /* ✅ 위로 내려가던 보정 제거 */
}

.caption-col .date {
  margin: 0;
  font-size: 0.82rem;
  color: var(--text-light);
  letter-spacing: 0.02rem;
}

.caption-col .title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-main);
}

.caption-col .desc {
  margin: 0;
  font-size: 0.9rem;
  color: var(--text-sub);
  line-height: 1.35;
}

/* ---------------- 좌/우 교차 배치 ---------------- */

/* 왼쪽 사진 → 오른쪽 캡션 */
.timeline-item.left {
  .media {
    grid-column: 1;
    justify-self: end;
    margin-right: var(--gutter);
    transform: translateY(calc(var(--lift) * -1));
  }

  .caption-col {
    grid-column: 3;
    justify-self: start;
    margin-left: var(--gutter);
    text-align: left;
    align-items: flex-start;
  }
}

/* 오른쪽 사진 → 왼쪽 캡션 */
.timeline-item.right {
  .media {
    grid-column: 3;
    justify-self: start;
    margin-left: var(--gutter);
    transform: translateY(var(--lift));
  }

  .caption-col {
    grid-column: 1;
    justify-self: end;
    margin-right: var(--gutter);
    text-align: right;
    align-items: flex-end;
  }
}

/* ✅ 사진 70% 아래부터 다음 시작(캡션 높이 제외) */
.timeline-item + .timeline-item {
  margin-top: var(--overlap);
}

/* ---------------- 모바일 ---------------- */
@media (max-width: 640px) {
  :root {
    /* ✅ 모바일도 살짝 축소 */
    --photo: clamp(118px, 44vw, 165px);
    --line-col-w: 32px;
    --gutter: clamp(10px, 3vw, 16px);
    --overlap: calc(var(--photo) * -0.3);
    --lift: calc(var(--photo) * 0.04);
  }

  .timeline-item {
    grid-template-columns: 1fr var(--line-col-w) 1fr;
  }

  .caption-col .title {
    font-size: 0.95rem;
  }
  .caption-col .desc {
    font-size: 0.86rem;
  }
}
